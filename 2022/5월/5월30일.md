## ğŸ˜€ 2022.05.30.ì›”

<br/>

# 34ì¥. ì´í„°ëŸ¬ë¸”

## 34.1 ì´í„°ë ˆì´ì…˜ í”„ë¡œí† ì½œ

ì´í„°ë ˆì´ì…˜ í”„ë¡œí† ì½œì€ ES6ì—ì„œ ìˆœíšŒ ê°€ëŠ¥í•œ ë°ì´í„° ì»¬ë ‰ì…˜ì„ ë§Œë“¤ê¸° ìœ„í•´ ECmaScript ì‚¬ì–‘ì— ì •ì˜í•˜ì—¬ ë¯¸ë¦¬ ì•½ì†í•œ ê·œì¹™ì´ë‹¤.
ì´í„°ë ˆì´ì…˜ í”„ë¡œí† ì½œì—ëŠ” ì´í„°ëŸ¬ë¸” í”„ë¡œí† ì½œê³¼ ì´í„°ë ˆì´í„° í”„ë¡œí† ì½œì´ ìˆë‹¤.

### ì´í„°ëŸ¬ë¸”

ì´ëŸ¬ëŸ¬ë¸”ì€ Symbol.iterator ë©”ì†Œë“œë¥¼ ê°–ê³  ìˆëŠ” ê°ì²´ë¥¼ ë§í•œë‹¤.

```javascript
let isIterable = (v) => v !== null && typeof v[Symbol.iterator] === "function";
```

```javascript
console.log("[] :" + isIterable([]));
console.log("ë¬¸ì: " + isIterable("abc"));
console.log("new Map(): " + isIterable(new Map()));
console.log("new Set(): " + isIterable(new Set()));
console.log("{}: " + isIterable({}));

/**
    [] :true
    ë¬¸ì: true
    new Map(): true
    new Set(): true
    {}: false
*/
```

Symbol.iteratorë¥¼ ê°–ê³  ìˆì§€ ì•Šì„ ê²½ìš° ìˆœíšŒ, ë””ìŠ¤íŠ¸ëŸ­ì²˜ë§ í• ë‹¹ì´ ë¶ˆê°€ëŠ¥í•´ì§„ë‹¤.

```javascript
let arr = [1, 2, 3];
for (const a of arr) console.log(a); // 1  2  3
```

```javascript
arr[Symbol.iterator] = null;
for (const a of arr) console.log(a); // ğŸš¨Error
```

### ì´í„°ë ˆì´í„°

ì´í„°ë ˆì´í„°ëŠ” {value:'ê°’' , done: true/false} í˜•íƒœë¥¼ ê°–ëŠ” ì´í„°ë ˆì´í„° ê°ì²´ë¥¼ ë¦¬í„´í•˜ëŠ” next() ë©”ì„œë“œë¥¼ ê°–ì€ ê°ì²´ë¥¼ ë§í•œë‹¤.  
ì´í„°ë ˆì´í„°ì˜ next ë©”ì„œë“œëŠ” ì´í„°ëŸ¬ë¸”ì˜ ê° ìš”ì†Œë¥¼ ìˆœíšŒí•˜ê¸° ìœ„í•œ í¬ì¸í„° ì—­í• ì„ í•œë‹¤.

```javascript
let array = [1, 2, 3];
// ì´í„°ëŸ¬ë¸” Symbol.iterator ë©”ì„œë“œê°€ ë°˜í™˜í•œ ì´í„°ë ˆì´í„°ëŠ” nextë©”ì„œë“œë¥¼ ê°–ëŠ”ë‹¤.
const iterator = array[Symbol.iterator]();
console.log("next" in iterator); //true
```

```javascript
console.log(iterator.next());
console.log(iterator.next());
console.log(iterator.next());
console.log(iterator.next());
/**
{ value: 1, done: false }
{ value: 2, done: false }
{ value: 3, done: false }
{ value: undefined, done: true }
*/
```

## 34.2 ë¹ŒíŠ¸ì¸ ì´í„°ëŸ¬ë¸”

ë¹ŒíŠ¸ì¸ ì´í„°ëŸ¬ë¸”ì€ Array, String, Map, Set, TypedArray, arguments, DOM ì»¬ë ‰ì…˜ ê³¼ ê°™ì´ ì´í„°ë ˆì´ì…˜ í”„ë¡œí† ì½œì„ ì¤€ìˆ˜í•œ ê°ì²´ë¥¼ ë§í•œë‹¤.

## 34.3 for...of ë¬¸

for...of ë¬¸ì€ ë‚´ë¶€ì ìœ¼ë¡œ next ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ë©° doneì´ flaseì´ë©´ ìˆœíšŒí•˜ê³  trueë©´ ì´í„°ëŸ¬ë¸”ì˜ ìˆœíšŒë¥¼ ì¤‘ë‹¨í•œë‹¤.  
`for (ë³€ìˆ˜ì„ ì–¸ of ì´í„°ëŸ¬ë¸”) {...}`

```javascript
// let array = [1,2,3]
for (const a of array) console.log(a);
/**
    1
    2
    3
*/
```

## 34.4 ì´í„°ëŸ¬ë¸”ê³¼ ìœ ì‚¬ ë°°ì—´ ê°ì²´

ìœ ì‚¬ ê°ì²´ë°°ì—´ì€ ë°°ì—´ì²˜ëŸ¼ indexê°€ ì¡´ì¬í•´ forë¬¸ìœ¼ë¡œ ìˆœíšŒê°€ê°€ëŠ¥í•˜ì§€ë§Œ Symbol.iterator ë©”ì„œë“œê°€ ì—†ê¸° ë•Œë¬¸ì— `for...of`ë¬¸ìœ¼ë¡œ ìˆœíšŒí•  ìˆ˜ ì—†ë‹¤.  
ë‹¨, arguments, NodeList, HTMLCollectionì€ ìœ ì‚¬ ë°°ì—´ ê°ì²´ì´ì§€ë§Œ Symbol.iterator ë©”ì„œë“œê°€ ìˆê¸° ë•Œë¬¸ì— ìˆœíšŒê°€ ê°€ëŠ¥í•˜ë‹¤.

```javascript
// ìœ ì‚¬ ë°°ì—´ê°ì²´
const arrayLike = {
  0: 1,
  1: 2,
  2: 3,
  length: 3,
};

for (let i = 0; i < arrayLike.length; i++) {
  console.log(arrayLike[i]);
}
/**
    1
    2
    3
*/
```

```javascript
for (const item of arrayLike) {
  console.log(item); // ğŸš¨Error
}
```

ì´ëŸ° ìœ ì‚¬ë°°ì—´ë„ `Array.from` ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ë©´ ì´í„°ëŸ¬ë¸”ì„ ì¸ìˆ˜ë¡œ ë°›ì•„ ë°°ì—´ë¡œ ë°˜í™˜í•´ì¤Œìœ¼ë¡œ ìˆœí™˜ì´ ê°€ëŠ¥í•´ì§„ë‹¤.

```javascript
for (const item of Array.from(arrayLike)) {
  console.log(item);
}
/**
    1
    2
    3
*/
```

## 34.6 ì‚¬ìš©ì ì •ì˜ ì´í„°ëŸ¬ë¸”

### ì‚¬ìš©ì ì •ì˜ ì´í„°ëŸ¬ë¸” êµ¬í˜„

```javascript
const fibonacci = {
  [Symbol.iterator]() {
    let [pre, cur] = [0, 1];
    const max = 10;

    return {
      next() {
        [pre, cur] = [cur, pre + cur];
        return { value: cur, done: cur >= max };
      },
    };
  },
};

for (const num of fibonacci) {
  console.log(num);
}

/**
    1
    2
    3
    5
    8
*/
```

### ì´í„°ëŸ¬ë¸”ì„ ìƒì„±í•˜ëŠ” í•¨ìˆ˜

```javascript
const fibonacciFunc = function (max) {
  let [pre, cur] = [0, 1];

  return {
    [Symbol.iterator]() {
      return {
        next() {
          [pre, cur] = [cur, pre + cur];
          return { value: cur, done: cur >= max };
        },
      };
    },
  };
};
for (const num of fibonacci) {
  console.log(num);
}

/**
    1
    2
    3
    5
    8
*/
```

**< refer to >**  
https://ko.javascript.info/iterable  
https://inpa.tistory.com/entry/JS-ğŸ“š-ì´í„°ëŸ¬ë¸”-ì´í„°ë ˆì´í„°-ğŸ’¯ì™„ë²½-ì´í•´#ì´í„°ëŸ¬ë¸”ê³¼_ì´í„°ë ˆì´í„°
